
Create database QL_DSTRUONGHOC
create table HEDAOTAO
(
	MAHE CHAR(5)NOT NULL PRIMARY KEY,
	TENHE NVARCHAR(50),

)
CREATE TABLE KHOI
(
	MAKHOI CHAR(5)NOT NULL PRIMARY KEY,
	TENKHOI NVARCHAR(20),
	MAHE CHAR(5),
)
CREATE TABLE LOP
(
	MALOP CHAR(5)NOT NULL PRIMARY KEY,
	TENLOP NVARCHAR(10),
	SISO INT,
	MAKHOI CHAR(5),
	MAGVCHUNGHIEM CHAR(7),

)

CREATE TABLE HOCSINH
(
	MAHOCSINH CHAR(7)NOT NULL PRIMARY KEY,
	TENHOCSINH NVARCHAR(50),
	MALOP CHAR(5),
	NGAYSINH DATE,
	DIACHI NVARCHAR(50),
	GIOITINH NVARCHAR(10),
	

)
CREATE TABLE GIAOVIEN
(
	MAGV CHAR(7)NOT NULL PRIMARY KEY,
	TENGIAOVIEN NVARCHAR(50),
	GIOITINH NVARCHAR(10),
	DIENTHOAI NVARCHAR(10),
	GMAIL NVARCHAR(50),
	MAHE CHAR(5),
	MAGVCHUNGHIEM CHAR(7),

)
CREATE TABLE PHANCONG
(
	MAGV CHAR(7)NOT NULL,
	MALOP CHAR(5)NOT NULL,
	MAHE CHAR(5)NOT NULL,
	CONSTRAINT PK_PHANCONG_MA PRIMARY KEY(MAGV,MALOP,MAHE),
)

CREATE TABLE KETQUA
(
	MAHS CHAR(7)NOT NULL,
	MALOP CHAR(5)NOT NULL,
	DIEMHK1 FLOAT,
	DIEMHK2 FLOAT,
	DIEMTK FLOAT,
	
	
	CONSTRAINT PK_KETQUA_KQ PRIMARY KEY(MAHS,MALOP),
)




ALTER TABLE KHOI
ADD CONSTRAINT FK_KHOI_HEDAOTAO FOREIGN KEY(MAHE) REFERENCES HEDAOTAO(MAHE)
ALTER TABLE LOP
ADD  CONSTRAINT FK_LOP_KHOI FOREIGN KEY(MAKHOI) REFERENCES KHOI(MAKHOI)
ALTER TABLE HOCSINH
ADD  CONSTRAINT FK_HOCSINH_LOP FOREIGN KEY(MALOP) REFERENCES LOP(MALOP)

ALTER TABLE LOP
ADD  CONSTRAINT FK_LOP_GIAOVIEN FOREIGN KEY(MAGVCHUNGHIEM) REFERENCES GIAOVIEN(MAGV)

ALTER TABLE GIAOVIEN
ADD  CONSTRAINT FK_GIAOVIEN_GIAOVIEN FOREIGN KEY(MAGVCHUNGHIEM) REFERENCES GIAOVIEN(MAGV)
ALTER TABLE GIAOVIEN
ADD  CONSTRAINT FK_GIAOVIEN_HEDAOTAO FOREIGN KEY(MAHE) REFERENCES HEDAOTAO(MAHE)




ALTER TABLE PHANCONG
ADD CONSTRAINT FK_PHANCONG_GIAOVIEN FOREIGN KEY(MAGV) REFERENCES GIAOVIEN(MAGV)


ALTER TABLE PHANCONG
ADD CONSTRAINT FK_PHANCONG_HEDAOTAO FOREIGN KEY(MAHE) REFERENCES HEDAOTAO(MAHE)


ALTER TABLE KETQUA
ADD CONSTRAINT FK_KETQUA_HOCSINH FOREIGN KEY(MAHS) REFERENCES HOCSINH(MAHOCSINH)

ALTER TABLE KETQUA
ADD CONSTRAINT FK_KETQUA_LOP FOREIGN KEY(MALOP) REFERENCES LOP(MALOP)



INSERT INTO HEDAOTAO
VALUES 
('HDT01','THCS'),
('HDT02','THPT')
INSERT INTO KHOI
VALUES
('MK006',N'KHỐI 6','HDT01'),
('MK007',N'KHỐI 7','HDT01'),
('MK008',N'KHỐI 8','HDT01'),
('MK009',N'KHỐI 9','HDT01'),
('MK010',N'KHỐI 10','HDT02'),
('MK011',N'KHỐI 11','HDT02'),
('MK012',N'KHỐI 12','HDT02')
INSERT INTO GIAOVIEN
VALUES 
('GVCS001',N'NGUYỄN ANH KHOA',N'NAM','0123456789',N'KHOA@GMAIL.COM','HDT01','GVCS001'),
('GVCS002',N'NGUYỄN ANH TÚ',N'NAM','0123456782',N'TU@GMAIL.COM','HDT01','GVCS002'),
('GVCS003',N'NGUYỄN ANH TÀI',N'NAM','0123456783',N'TAI@GMAIL.COM','HDT01','GVCS003'),
('GVCS004',N'NGUYỄN THỊ LUYẾN',N'NỮ','0123456784',N'LUYEN@GMAIL.COM','HDT01','GVCS004'),
('GVCS005',N'TRẦN ANH KHOA',N'NAM','0123456789',N'KHOA1@GMAIL.COM','HDT01','GVCS005'),
('GVCS006',N'TRẦN ANH TÚ',N'NAM','0223456789',N'TU1@GMAIL.COM','HDT01','GVCS006'),
('GVCS007',N'TRẦN ANH TÀI',N'NAM','0323456789',N'TAI1GMAIL.COM','HDT01','GVCS007'),
('GVCS008',N'TRẦN ANH LUYẾN',N'NỮ','0423456789',N'LUYEN1@GMAIL.COM','HDT01','GVCS008'),
('GVCS009',N'HỒ ANH KHOA',N'NAM','0123456719',N'KHOA2@GMAIL.COM','HDT01','GVCS009'),
('GVCS010',N'HỒ ANH TÚ',N'NAM','0123456729',N'TU2@GMAIL.COM','HDT01','GVCS010'),
('GVCS011',N'HỒ ANH TÀI',N'NAM','0123456739',N'TAI2@GMAIL.COM','HDT01','GVCS011'),
('GVCS012',N'HỒ ANH LUYẾN',N'NỮ','0123456749',N'LUYEN2@GMAIL.COM','HDT01','GVCS012'),
('GVCS013',N'PHẠM ANH KHOA',N'NAM','0143456789',N'KHOA3@GMAIL.COM','HDT01','GVCS013'),
('GVCS014',N'PHẠM ANH TÚ',N'NAM','0125456789',N'TU3@GMAIL.COM','HDT01','GVCS014'),
('GVCS015',N'PHẠM ANH TÀI',N'NAM','0126456789',N'TAI3@GMAIL.COM','HDT01','GVCS015'),
('GVCS016',N'PHẠM ANH LUYẾN',N'NỮ','0127456789',N'LUYEN3@GMAIL.COM','HDT01','GVCS016'),

('GVPT001',N'NGUYỄN ANH KHOA',N'NAM','0123156789',N'KHOA4@GMAIL.COM','HDT02','GVPT001'),
('GVPT002',N'NGUYỄN ANH TÚ',N'NAM','0123256782',N'TU4@GMAIL.COM','HDT02','GVPT002'),
('GVPT003',N'NGUYỄN ANH TÀI',N'NAM','0123356783',N'TAI4@GMAIL.COM','HDT02','GVPT003'),
('GVPT004',N'NGUYỄN THỊ LUYẾN',N'NỮ','0123556784',N'LUYEN4@GMAIL.COM','HDT02','GVPT004'),
('GVPT005',N'TRẦN ANH KHOA',N'NAM','0123656789',N'KHOA11@GMAIL.COM','HDT02','GVPT005'),
('GVPT006',N'TRẦN ANH TÚ',N'NAM','0223756789',N'TU11@GMAIL.COM','HDT02','GVPT006'),
('GVPT007',N'TRẦN ANH TÀI',N'NAM','0323856789',N'TAI11GMAIL.COM','HDT02','GVPT007'),
('GVPT008',N'TRẦN ANH LUYẾN',N'NỮ','0423956789',N'LUYEN11@GMAIL.COM','HDT02','GVPT008'),
('GVPT009',N'HỒ ANH KHOA',N'NAM','0123456119',N'KHOA22@GMAIL.COM','HDT02','GVPT009'),
('GVPT010',N'HỒ ANH TÚ',N'NAM','0123456229',N'TU22@GMAIL.COM','HDT02','GVPT010'),
('GVPT011',N'HỒ ANH TÀI',N'NAM','0123456339',N'TAI22@GMAIL.COM','HDT02','GVPT011'),
('GVPT012',N'HỒ ANH LUYẾN',N'NỮ','0123456449',N'LUYEN22@GMAIL.COM','HDT02','GVPT012'),
('GVPT013',N'PHẠM ANH KHOA',N'NAM','0143456589',N'KHOA33@GMAIL.COM','HDT02','GVPT013'),
('GVPT014',N'PHẠM ANH TÚ',N'NAM','0125456689',N'TU33@GMAIL.COM','HDT02','GVPT014'),
('GVPT015',N'PHẠM ANH TÀI',N'NAM','0126456889',N'TAI33@GMAIL.COM','HDT02','GVPT015'),
('GVPT016',N'PHẠM ANH LUYẾN',N'NỮ','0127456989',N'LUYEN33@GMAIL.COM','HDT02','GVPT016'),
('GVPT017',N'HỒ ANH KHOA',N'NAM','0123451119',N'KHOA122@GMAIL.COM','HDT02','GVPT017'),
('GVPT018',N'HỒ ANH TÚ',N'NAM','0123452229',N'TU122@GMAIL.COM','HDT02','GVPT018'),
('GVPT019',N'HỒ ANH TÀI',N'NAM','0123453339',N'TAI122@GMAIL.COM','HDT02','GVPT019'),
('GVPT020',N'HỒ ANH LUYẾN',N'NỮ','0123454449',N'LUYEN122@GMAIL.COM','HDT02','GVPT020'),
('GVPT021',N'PHẠM ANH KHOA',N'NAM','0143455589',N'KHOA133@GMAIL.COM','HDT02','GVPT021'),
('GVPT022',N'PHẠM ANH TÚ',N'NAM','0125457689',N'TU133@GMAIL.COM','HDT02','GVPT022'),
('GVPT023',N'PHẠM ANH TÀI',N'NAM','0126458889',N'TAI133@GMAIL.COM','HDT02','GVPT023'),
('GVPT024',N'PHẠM ANH LUYẾN',N'NỮ','0127459989',N'LUYEN133@GMAIL.COM','HDT02','GVPT024')



INSERT INTO LOP
VALUES 
('ML06A','6A',40,'MK006','GVCS001'),
('ML06B','6B',42,'MK006','GVCS002'),
('ML06C','6C',44,'MK006','GVCS003'),
('ML06D','6D',45,'MK006','GVCS004'),

('ML07A','7A',46,'MK007','GVCS005'),
('ML07B','7B',39,'MK007','GVCS006'),
('ML07C','7C',47,'MK007','GVCS007'),
('ML07D','7D',45,'MK007','GVCS008'),
('ML08A','8A',40,'MK008','GVCS009'),
('ML08B','8B',41,'MK008','GVCS010'),
('ML08C','8C',38,'MK008','GVCS011'),
('ML08D','8D',44,'MK008','GVCS012'),
('ML09A','9A',42,'MK009','GVCS013'),
('ML09B','9B',46,'MK009','GVCS014'),
('ML09D','9C',43,'MK009','GVCS015'),
('ML09C','9D',43,'MK009','GVCS016'),

('ML10A','10A',40,'MK010','GVPT001'),
('ML10B','10B',41,'MK010','GVPT002'),
('ML10C','10C',42,'MK010','GVPT003'),
('ML10D','10D',43,'MK010','GVPT004'),
('ML10E','10E',44,'MK010','GVPT005'),
('ML10F','10F',45,'MK010','GVPT006'),
('ML10I','10I',46,'MK010','GVPT007'),
('ML10K','10K',43,'MK010','GVPT008'),

('ML11A','11A',40,'MK011','GVPT009'),
('ML11B','11B',41,'MK011','GVPT010'),
('ML11C','11C',42,'MK011','GVPT011'),
('ML11D','11D',43,'MK011','GVPT012'),
('ML11E','11E',44,'MK011','GVPT013'),
('ML11F','11F',45,'MK011','GVPT014'),
('ML11I','11I',46,'MK011','GVPT015'),
('ML11K','11K',43,'MK011','GVPT016'),

('ML12A','12A',40,'MK012','GVPT017'),
('ML12B','12B',41,'MK012','GVPT018'),
('ML12C','12C',42,'MK012','GVPT019'),
('ML12D','12D',43,'MK012','GVPT020'),
('ML12E','12E',44,'MK012','GVPT021'),
('ML12F','12F',45,'MK012','GVPT022'),
('ML12I','12I',46,'MK012','GVPT023'),
('ML12K','12K',43,'MK012','GVPT024')

INSERT INTO HOCSINH
VALUES
('MHSCS01',N'NGUYỄN HẢI TIẾN','ML06A','2/2/2007',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS02',N'NGUYỄN HẢI HIỀN','ML06B','2/3/2007',N'TÂN BÌNH,HCM',N'NỮ'),
('MHSCS03',N'TRẦN TRUNG PHÚC','ML06C','2/4/2007',N'BÌNH THẠNH,HCM',N'NAM'),
('MHSCS04',N'NGUYỄN HẢI YẾN','ML06D','2/5/2007',N'QUẬN CAM,HCM',N'NỮ'),

('MHSCS05',N'LÊ VĂN ĐẠT'           ,'ML07A','3/4/2006',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS06',N'LÊ PHÚ HƯNG'          ,'ML07B','3/5/2006',N'QUẬN 2,HCM',N'NAM'),
('MHSCS07',N'NGUYỄN THỊ NGỌC TRÂM','ML07C','3/6/2006',N'PHÚ NHUẬN,HCM',N'NỮ'),
('MHSCS08',N'NGUYỄN CẨM TIÊN',     'ML07D','3/7/2006',N'TÂN PHÚ,HCM',N'NỮ'),

('MHSCS09',N'NGUYỄN VĂN LA','ML08A','4/2/2005',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS10',N'NGUYỄN TRUNG HÙNG','ML08B','4/7/2005',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS11',N'NGUYỄN THỊ MỘNG MƠ','ML08C','4/9/2005',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSCS12',N'NGUYỄN THỊ HẠNH','ML08D','4/10/2005',N'TÂN PHÚ,HCM',N'NỮ'),

('MHSCS13',N'HỒ VĂN NAM','ML09A','4/2/2004',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS14',N'HỒ NGUYỆN','ML09B','4/7/2004',N'TÂN PHÚ,HCM',N'NAM'),
('MHSCS15',N'ĐỊNH THỊ NGỌC','ML09D','4/9/2004',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSCS16',N'NGUYỄN QUANG HUY','ML09C','4/10/2004',N'TÂN PHÚ,HCM',N'NAM'),




('MHSPT01',N'VÕ TRUNG PHÚC ','ML10A','4/2/2002',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT02',N'NGUYỄN THỊ TÚ','ML10B','4/7/2002',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT03',N'TRẦN QUỐC HUY','ML10C','4/9/2002',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT04',N'NGUYỄN THỊ LOAN','ML10D','4/10/2002',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT05',N'VÕ TRUNG LONG ','ML10E','4/3/2002',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT06',N'NGUYỄN THỊ HUỆ','ML10F','4/5/2002',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT07',N'TRẦN QUỐC HUY','ML10I','4/1/2002',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT08',N'NGUYỄN CẨM HIỀN','ML10K','5/3/2002',N'TÂN PHÚ,HCM',N'NỮ'),

('MHSPT09',N'VÕ TRUNG PHÚC ','ML11A','5/2/2001',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT10',N'NGUYỄN THỊ TÚ','ML11B','6/7/2001',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT11',N'TRẦN QUỐC HUY','ML11C','2/9/2001',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT12',N'NGUYỄN THỊ LOAN','ML11D','1/10/2001',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT13',N'VÕ TRUNG LONG ','ML11E','2/3/2001',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT14',N'NGUYỄN THỊ HUỆ','ML11F','4/5/2001',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT15',N'TRẦN QUỐC HUY','ML11I','8/1/2001',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT16',N'NGUYỄN CẨM HIỀN','ML11K','4/3/2001',N'TÂN PHÚ,HCM',N'NỮ'),

('MHSPT17',N'VÕ TRUNG PHÚC ','ML12A','4/2/2000',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT18',N'NGUYỄN THỊ TÚ','ML12B','4/3/2000',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT19',N'TRẦN QUỐC HUY','ML12C','4/4/2000',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT20',N'NGUYỄN THỊ LOAN','ML12D','4/5/2000',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT21',N'VÕ TRUNG LONG ','ML12E','4/6/2000',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT22',N'NGUYỄN THỊ HUỆ','ML12F','4/7/2000',N'TÂN PHÚ,HCM',N'NỮ'),
('MHSPT23',N'TRẦN QUỐC HUY','ML12I','4/8/2000',N'TÂN PHÚ,HCM',N'NAM'),
('MHSPT24',N'NGUYỄN CẨM HIỀN','ML12K','5/9/2000',N'TÂN PHÚ,HCM',N'NỮ')



INSERT INTO PHANCONG
VALUES
('GVCS001','ML06A','HDT01'),
('GVCS002','ML06B','HDT01'),
('GVCS003','ML06C','HDT01'),
('GVCS004','ML06D','HDT01'),
('GVCS005','ML07A','HDT01'),
('GVCS006','ML07B','HDT01'),
('GVCS007','ML07C','HDT01'),
('GVCS008','ML07D','HDT01'),
('GVCS009','ML08A','HDT01'),
('GVCS010','ML08B','HDT01'),
('GVCS011','ML08C','HDT01'),
('GVCS012','ML08D','HDT01'),
('GVCS013','ML09A','HDT01'),
('GVCS014','ML09B','HDT01'),
('GVCS015','ML09C','HDT01'),
('GVCS016','ML09D','HDT01'),

('GVPT001','ML10A','HDT02'),
('GVPT002','ML10B','HDT02'),
('GVPT003','ML10C','HDT02'),
('GVPT004','ML10D','HDT02'),
('GVPT005','ML10E','HDT02'),
('GVPT006','ML10F','HDT02'),
('GVPT007','ML10I','HDT02'),
('GVPT008','ML10K','HDT02'),
('GVPT009','ML11A','HDT02'),
('GVPT010','ML11B','HDT02'),
('GVPT011','ML11C','HDT02'),
('GVPT012','ML11D','HDT02'),
('GVPT013','ML11E','HDT02'),
('GVPT014','ML11F','HDT02'),
('GVPT015','ML11I','HDT02'),
('GVPT016','ML11K','HDT02'),
('GVPT017','ML12A','HDT02'),
('GVPT018','ML12B','HDT02'),
('GVPT019','ML12C','HDT02'),
('GVPT020','ML12D','HDT02'),
('GVPT021','ML12E','HDT02'),
('GVPT022','ML12F','HDT02'),
('GVPT023','ML12I','HDT02'),
('GVPT024','ML12K','HDT02')
INSERT INTO KETQUA
VALUES
('MHSCS01','ML06A',7,8,NULL),
('MHSCS02','ML06B',4,9,NULL),
('MHSCS03','ML06C',6,7,NULL),
('MHSCS04','ML06D',4,5,NULL),

('MHSCS05','ML07A',1,8,NULL),
('MHSCS06','ML07B',2,4,NULL),
('MHSCS07','ML07C',3,6,NULL),
('MHSCS08','ML07D',4,8,NULL),

('MHSCS09','ML08A',7,8,NULL),
('MHSCS10','ML08B',6,5,NULL),
('MHSCS11','ML08C',5,4,NULL),
('MHSCS12','ML08D',7,9,NULL),

('MHSCS13','ML09A',7,10,NULL),
('MHSCS14','ML09B',7,5,NULL),
('MHSCS15','ML09C',5,6,NULL),
('MHSCS16','ML09D',3,3,NULL),

('MHSPT01','ML10A',4,7.9,NULL),
('MHSPT02','ML10B',5,3.6,NULL),
('MHSPT03','ML10C',6,6.7,NULL),
('MHSPT04','ML10D',7,6,NULL),
('MHSPT05','ML10E',8,8,NULL),
('MHSPT06','ML10F',9,7,NULL),
('MHSPT07','ML10I',10,10,NULL),
('MHSPT08','ML10K',10,9,NULL),

('MHSPT09','ML11A',5,5,NULL),
('MHSPT10','ML11B',5,8,NULL),
('MHSPT11','ML11C',6,9,NULL),
('MHSPT12','ML11D',7,3,NULL),
('MHSPT13','ML11E',8,3,NULL),
('MHSPT14','ML11F',5,5,NULL),
('MHSPT15','ML11I',4,4,NULL),
('MHSPT16','ML11K',6,7,NULL),

('MHSPT17','ML12A',4,5,NULL),
('MHSPT18','ML12B',5,6,NULL),
('MHSPT19','ML12C',6,7,NULL),
('MHSPT20','ML12D',7,8,NULL),
('MHSPT21','ML12E',8,9,NULL),
('MHSPT22','ML12F',9,5,NULL),
('MHSPT23','ML12I',10,7,NULL),
('MHSPT24','ML12K',6,7,NULL)



ALTER TABLE HEDAOTAO
ADD CONSTRAINT CHECK_TEN_HE CHECK ((TENHE = 'THCS' ) OR (TENHE = 'THPT'));
ALTER TABLE HOCSINH
ADD CONSTRAINT CHECK_GIOI_TINH CHECK ((GIOITINH=N'NAM') OR (GIOITINH =N'NỮ'));

ALTER TABLE LOP
ADD CONSTRAINT CHECK_SI_SO CHECK (SISO > 0);




